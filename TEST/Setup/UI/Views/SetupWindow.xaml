<Window x:Class="CAM_API.Setup.UI.Views.SetupWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:vm="clr-namespace:CAM_API.Setup.UI.ViewModels"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Setup" SizeToContent="Height" Width="530" WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>
    <Window.DataContext>
        <vm:SetupWindowViewModel />
    </Window.DataContext>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Setup GroupBox -->
        <GroupBox Header="Setup" Grid.Row="0" Grid.Column="0" Margin="4">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <!-- Program Info -->
                <GroupBox Grid.Row="0" Grid.Column="0" Margin="0" BorderThickness="0">
                    <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="2">
                        <Button Content="Program Info" Width="150" Height="25" Margin="2"
                                Command="{Binding ShowProgramInfoCommand}"/>
                    </StackPanel>
                </GroupBox>
                <!-- Program Name -->
                <GroupBox Grid.Row="0" Grid.Column="1" Margin="2" BorderThickness="0">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="2">
                        <Label Content="P/G Name :" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="2"/>
                        <Label Content="{Binding ProgramName}" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                    </StackPanel>
                </GroupBox>
                <!-- Machine Template -->
                <GroupBox Grid.Row="1" Grid.ColumnSpan="2" Margin="0,-10,0,0" BorderThickness="0">
                    <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="2">
                        <Label Content="Machine Template :" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="2"/>
                        <ComboBox ItemsSource="{Binding MachineTemplates}"
                                  SelectedItem="{Binding SelectedMachineTemplate, Mode=TwoWay}"
                                  DisplayMemberPath="Key"
                                  Width="250" Margin="2,5,2,0"/>
                        <Button Content="Edit" Width="60" Margin="10,6,2,0"
                                Command="{Binding EditTemplateCommand}"/>
                    </StackPanel>
                </GroupBox>
            </Grid>
        </GroupBox>

        <!-- Part GroupBox -->
        <GroupBox Header="Part(가공품)" Grid.Row="1" Grid.Column="0" Margin="4">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- WCS Selection -->
                <GroupBox Grid.Row="0" Grid.Column="0" Margin="0" BorderThickness="0">
                    <StackPanel Orientation="Horizontal">
                        <RadioButton Content="G54"
                                     IsChecked="{Binding IsG54, Mode=TwoWay}"
                                     GroupName="WCSGroup"
                                     Margin="2,5,2,2" VerticalAlignment="Center"/>
                        <RadioButton Content="G55"
                                     IsChecked="{Binding IsG55, Mode=TwoWay}"
                                     GroupName="WCSGroup"
                                     Margin="10,5,2,2" VerticalAlignment="Center"/>
                    </StackPanel>
                </GroupBox>

                <!-- Part Type from KBM DATABASE -->
                <GroupBox Grid.Row="0" Grid.Column="1" Margin="0" BorderThickness="0">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="70,2,2,2">
                        <Label  Content="PartType :" HorizontalContentAlignment="Left" VerticalAlignment="Center" Width="80"/>
                        <ComboBox ItemsSource="{Binding PartTypes}"
                                  SelectedItem="{Binding SelectedPartType, Mode=TwoWay}"
                                  DisplayMemberPath="Name"
                                  Width="200" Margin="2"/>
                    </StackPanel>
                </GroupBox>

                <!-- Browse and load Part file name into the linked TextBox -->
                <GroupBox Grid.Row="1" Grid.ColumnSpan="2" Margin="0" BorderThickness="0">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="2">
                        <Label Content="Part :" Width="50" Margin="2" HorizontalContentAlignment="Left" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding PartFilePath, Mode=TwoWay}" Height="20" Width="310" IsReadOnly="True" Margin="2"/>
                        <Button Content="Load" Width="80" Height="20" Margin="10,2,2,2"
                                Command="{Binding LoadPartFileCommand}"/>
                    </StackPanel>
                </GroupBox>
            </Grid>
        </GroupBox>

        <!-- Stock GroupBox -->
        <GroupBox Header="Stock(소재)" Grid.Row="2" Grid.Column="0" Margin="4">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="30"/>
                </Grid.RowDefinitions>
                <!-- Stock Type RadioButtons With Finish LG -->
                <GroupBox Grid.Row="0" Margin="0" BorderThickness="0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="2,8,0,0">
                                <RadioButton Content="Bar Stock"
                                             IsChecked="{Binding IsBarStock, Mode=TwoWay}"
                                             GroupName="StockType" Margin="2"/>
                                <RadioButton Content="File Stock"
                                             IsChecked="{Binding IsFileStock, Mode=TwoWay}"
                                             GroupName="StockType" Margin="10,2,2,2"/>
                            </StackPanel>
                            <StackPanel>
                                <CheckBox Content="Use previous operation's WCS"
                                          FontSize="12" Margin="2" VerticalAlignment="Center"
                                          Visibility="{Binding IsFileStock, Converter={StaticResource BoolToVisibilityConverter}}"
                                          IsChecked="{Binding UsePreviousWCS, Mode=TwoWay}"/>
                            </StackPanel>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Margin="50,0,0,0">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="2">
                                <Label Content="Finish LG : " HorizontalContentAlignment="Right" Margin="2" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding FinishLG, Mode=TwoWay}" Margin="2" Width="80" Height="20"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,-12,0,0">
                                <Label Content="= Final machining length (positive value)" Foreground="Red" VerticalAlignment="Center" Margin="2"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </GroupBox>
                <!-- Material Information (BAR STOCK) -->
                <GroupBox Grid.Row="1" Margin="0,-10,0,0" BorderThickness="0"
                          Visibility="{Binding IsBarStock, Converter={StaticResource BoolToVisibilityConverter}}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left" Margin="2">
                            <Label Content="Stock OD :" VerticalAlignment="Center" Width="70"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Left" Margin="2">
                            <TextBox Text="{Binding StockOD, Mode=TwoWay}" Margin="-5,2,2,2" Width="80" Height="20"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Left" Margin="2">
                            <Label Content="Stock ID :" VerticalAlignment="Center" Width="70"/>
                        </StackPanel>
                        <StackPanel Grid.Column="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="2">
                            <TextBox Text="{Binding StockID, Mode=TwoWay}" Margin="-5,2,2,2" Width="80" Height="20"/>
                        </StackPanel>
                        <StackPanel Grid.Column="4" Orientation="Horizontal" HorizontalAlignment="Left" Margin="2">
                            <Label Content="Stock LG :" VerticalAlignment="Center" Width="70"/>
                        </StackPanel>
                        <StackPanel Grid.Column="5" Orientation="Horizontal" HorizontalAlignment="Left" Margin="2">
                            <TextBox Text="{Binding StockLG, Mode=TwoWay}" Margin="-5,2,2,2" Width="80" Height="20"/>
                        </StackPanel>
                    </Grid>
                </GroupBox>
                <!-- Material Information (File STOCK) -->
                <GroupBox Grid.Row="1" Margin="0,-10,0,0" BorderThickness="0"
                          Visibility="{Binding IsFileStock, Converter={StaticResource BoolToVisibilityConverter}}">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="2">
                        <Label Content="Stock :" Width="50" Margin="2" HorizontalContentAlignment="Left" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding StockFilePath, Mode=TwoWay}" Height="20" Width="310" IsReadOnly="True" Margin="2"/>
                        <Button Content="Load" Width="80" Height="20" Margin="10,2,2,2"
                                Command="{Binding LoadStockFileCommand}"/>
                    </StackPanel>
                </GroupBox>
            </Grid>
        </GroupBox>

        <!-- Buttons -->
        <StackPanel Orientation="Horizontal" Grid.Row="4" Grid.ColumnSpan="2" HorizontalAlignment="Right" Margin="5,20,15,5">
            <Button Content="ALIGN SOLID" Width="80" Height="20" Margin="2" VerticalAlignment="Top"
                    Command="{Binding AlignSolidCommand}"/>
            <Button Content="MACHINE" Width="80" Height="20" Margin="2" VerticalAlignment="Top"
                    Command="{Binding LoadMachineCommand}"/>
            <Button Content="Part" Width="80" Height="20" Margin="2" VerticalAlignment="Top"
                    Command="{Binding ImportCommand}"/>
            <Button Content="Cancel" Width="80" Height="20" Margin="2" VerticalAlignment="Top"
                    Command="{Binding CancelCommand}"/>
        </StackPanel>

        <!-- LOGO -->
        <GroupBox BorderThickness="0" Grid.Row="5" Grid.ColumnSpan="2" Margin="2">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal">
                    <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left" Margin="-10,2,2,2">
                        <Image Width="120" Height="55" Margin="2" Source="/CAM_API;component/Resources/logo.PNG"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Left" Margin="2">
                        <TextBlock VerticalAlignment="Center" TextAlignment="Left" TextWrapping="Wrap" FontSize="10" HorizontalAlignment="Center">
                            Copyright © 2025 [FKSM].
                            <LineBreak/>
                            All Rights Reserved. Unauthorized reproduction or distribution of this program,
                            <LineBreak/>
                            or any portion of it, may result in severe civil and criminal penalties.
                        </TextBlock>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </GroupBox>
    </Grid>
</Window>