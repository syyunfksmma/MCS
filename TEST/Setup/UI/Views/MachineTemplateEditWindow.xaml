<Window x:Class="CAM_API.Setup.UI.Views.MachineTemplateEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:CAM_API.Setup.UI.ViewModels"
        Title="Machine Template Editor" Width="850" SizeToContent="Height"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>
    <Window.DataContext>
        <vm:MachineTemplateEditViewModel />
    </Window.DataContext>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="120"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="250"/>
        </Grid.ColumnDefinitions>

        <!-- Template Name -->
        <Label Content="TEMPLATE NAME :" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
        <TextBox Text="{Binding TemplateName, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" Width="290" Margin="5"/>
        <CheckBox Content="Check to use G55 coordinate system" Grid.Row="0" Grid.Column="2"
                  IsChecked="{Binding UseG55, Mode=TwoWay}" VerticalAlignment="Center"/>

        <!-- Machine (Mprj) -->
        <Label Content="Machine :" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
        <StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="1">
            <TextBox Text="{Binding MprjFile, Mode=TwoWay}" Width="200" Margin="5" IsReadOnly="True"/>
            <Button Content="Load" Width="80" Margin="5"
                    Command="{Binding SelectFileCommand}" CommandParameter="mprj"/>
        </StackPanel>
        <StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="2">
            <Label Content="Tool :" VerticalAlignment="Center" Margin="2"/>
            <ComboBox ItemsSource="{Binding ToolList}" SelectedItem="{Binding SelectedTool, Mode=TwoWay}" Margin="5" Width="174"/>
        </StackPanel>

        <!-- G54 Group -->
        <GroupBox Header="G54 Work Coordinate" Grid.Row="2" Grid.ColumnSpan="3" Margin="4">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="400" />
                    <ColumnDefinition Width="300" />
                </Grid.ColumnDefinitions>
                <!-- Fixture -->
                <GroupBox Header="Fixture (gdml)" Grid.Column="0" Width="360" Margin="-20,5,0,0" BorderThickness="0">
                    <StackPanel>
                        <!-- Chuck -->
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Chuck :" Width="85"/>
                            <TextBox Text="{Binding G54Chuck, Mode=TwoWay}" Width="150" Margin="5,2,5,2" IsReadOnly="True"/>
                            <Button Content="Load" Width="80" Margin="5,2,5,2"
                                    Command="{Binding SelectFileCommand}" CommandParameter="g54Chuck"/>
                        </StackPanel>
                        <!-- Jaw -->
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Jaw :" Width="85"/>
                            <TextBox Text="{Binding G54Jaw, Mode=TwoWay}" Width="150" Margin="5,2,5,2" IsReadOnly="True"/>
                            <Button Content="Load" Width="80"  Margin="5,2,5,2"
                                    Command="{Binding SelectFileCommand}" CommandParameter="g54Jaw"/>
                        </StackPanel>
                        <!-- Rotary Option -->
                        <StackPanel Orientation="Horizontal">
                            <CheckBox Content="With rotary table" IsChecked="{Binding UseG54Rot, Mode=TwoWay}" Width="200" Margin="5"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Visibility="{Binding UseG54Rot, Converter={StaticResource BoolToVisibilityConverter}}">
                            <Label Content="Rotary table :" Width="85"/>
                            <TextBox Text="{Binding G54Rot, Mode=TwoWay}" Width="150" Margin="5,2,5,2" IsReadOnly="True"/>
                            <Button Content="Load" Width="80" Margin="5,2,5,2"
                                    Command="{Binding SelectFileCommand}" CommandParameter="g54Rot"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>
                <!-- Position -->
                <GroupBox Header="Position" Grid.Column="1" Margin="0,5,-100,5">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Translate XYZ" Width="120"/>
                            <TextBox Text="{Binding G54XTrans, Mode=TwoWay}" Width="80" Margin="5"/>
                            <TextBox Text="{Binding G54YTrans, Mode=TwoWay}" Width="80" Margin="5"/>
                            <TextBox Text="{Binding G54ZTrans, Mode=TwoWay}" Width="80" Margin="5"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Clamping Closed Position :" Width="160"/>
                            <TextBox Text="{Binding G54JawPosition, Mode=TwoWay}" Width="80" Margin="5"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <CheckBox Content="Reverse Direction" IsChecked="{Binding UseG54JawReverse, Mode=TwoWay}" Margin="5,0,5,0"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>
            </Grid>
        </GroupBox>

        <!-- G55 Group (Visibility는 UseG55 바인딩) -->
        <GroupBox Header="G55 Work Coordinate" Grid.Row="3" Grid.ColumnSpan="3" Margin="4"
                  Visibility="{Binding UseG55, Converter={StaticResource BoolToVisibilityConverter}}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="400" />
                    <ColumnDefinition Width="300" />
                </Grid.ColumnDefinitions>
                <!-- Fixture -->
                <GroupBox Header="Fixture (gdml)" Grid.Column="0" Width="360" Margin="-20,5,0,0" BorderThickness="0">
                    <StackPanel>
                        <!-- Chuck -->
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Chuck :" Width="85"/>
                            <TextBox Text="{Binding G55Chuck, Mode=TwoWay}" Width="150" Margin="5,2,5,2" IsReadOnly="True"/>
                            <Button Content="Load" Width="80" Margin="5,2,5,2"
                                    Command="{Binding SelectFileCommand}" CommandParameter="g55Chuck"/>
                        </StackPanel>
                        <!-- Jaw -->
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Jaw :" Width="85"/>
                            <TextBox Text="{Binding G55Jaw, Mode=TwoWay}" Width="150" Margin="5,2,5,2" IsReadOnly="True"/>
                            <Button Content="Load" Width="80" Margin="5,2,5,2"
                                    Command="{Binding SelectFileCommand}" CommandParameter="g55Jaw"/>
                        </StackPanel>
                        <!-- Rotary Option -->
                        <StackPanel Orientation="Horizontal">
                            <CheckBox Content="With rotary table" IsChecked="{Binding UseG55Rot, Mode=TwoWay}" Width="200" Margin="5"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Visibility="{Binding UseG55Rot, Converter={StaticResource BoolToVisibilityConverter}}">
                            <Label Content="Rotary table :" Width="85"/>
                            <TextBox Text="{Binding G55Rot, Mode=TwoWay}" Width="150" Margin="5,2,5,2" IsReadOnly="True"/>
                            <Button Content="Load" Width="80" Margin="5,2,5,2"
                                    Command="{Binding SelectFileCommand}" CommandParameter="g55Rot"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>
                <!-- Position -->
                <GroupBox Header="Position" Grid.Column="1" Margin="0,5,-100,5">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Translate XYZ" Width="120"/>
                            <TextBox Text="{Binding G55XTrans, Mode=TwoWay}" Width="80" Margin="5"/>
                            <TextBox Text="{Binding G55YTrans, Mode=TwoWay}" Width="80" Margin="5"/>
                            <TextBox Text="{Binding G55ZTrans, Mode=TwoWay}" Width="80" Margin="5"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Clamping Closed Position :" Width="160"/>
                            <TextBox Text="{Binding G55JawPosition, Mode=TwoWay}" Width="80" Margin="5"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <CheckBox Content="Reverse Direction" IsChecked="{Binding UseG55JawReverse, Mode=TwoWay}" Margin="5,0,5,0"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>
            </Grid>
        </GroupBox>

        <!-- Buttons -->
        <StackPanel Grid.Row="6" Grid.ColumnSpan="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="5">
            <Button Content="Save" Width="100" Margin="5" Command="{Binding SaveCommand}" />
            <Button Content="Delete" Width="100" Margin="5" Command="{Binding DeleteCommand}" />
            <Button Content="Cancel" Width="100" Margin="5" Command="{Binding CancelCommand}" />
        </StackPanel>
    </Grid>
</Window>